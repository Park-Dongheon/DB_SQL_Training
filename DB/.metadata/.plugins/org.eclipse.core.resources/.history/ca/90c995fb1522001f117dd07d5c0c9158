package edu.pnu;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

abstract class MemberDao {
	
	private static String URL = "jdbc:mysql://localhost:3306/musthave";
	private static String USER = "scott";
	private static String PASS = "tiger";
	
	
	public abstract void insertMember(Connection con) throws SQLException;
	public abstract void updateMember(Connection con) throws SQLException;
	public abstract void deleteMember(Connection con) throws SQLException;
	public abstract void selectMember(Connection con) throws SQLException;
	
	public static String getURL() {
		return URL;
	}
	public static void setURL(String uRL) {
		URL = uRL;
	}
	public static String getUSER() {
		return USER;
	}
	public static void setUSER(String uSER) {
		USER = uSER;
	}
	public static String getPASS() {
		return PASS;
	}
	public static void setPASS(String pASS) {
		PASS = pASS;
	}
	
	
}

public class MemberDao_Statement extends MemberDao{
	
	private static Scanner sc = new Scanner(System.in);
	
	private static String DRIVER = "com.mysql.cj.jdbc.Driver";
	
	public static void main(String[] args) throws SQLException {
		MemberDao_Statement dao = new MemberDao_Statement();
		
		try(Connection con = DriverManager.getConnection(getURL(), getUSER(), getPASS())) {
			
			Class.forName(DRIVER);
			
			boolean flag = true;
			while(flag) {
				System.out.print("[I]nsert/[U]pdate/[D]elete/[S]elect/e[X]it: ");
				String s = sc.next().toUpperCase();
				switch(s) {
				case "I": insertMember(con);		break;
				case "U": updateMember(con);		break;
				case "D": deleteMember(con);		break;
				case "S": selectMember(con);		break;
				case "X": flag = false;				break;
				}
			}
			System.out.println("Bye~");
			
		} catch (Exception e) {
			System.out.println("로딩 실패 : " + e.getMessage());
		}
	}

	@Override
	public void insertMember(Connection con) throws SQLException {
		System.out.println("Insert Member");
		String sql = "INSERT INTO member(pass, name) VALUES";
		String pass = sc.next();
		String name = sc.next();
		try(Statement stmt = con.createStatement();
			ResultSet rs = stmt.executeUpdate(sql + String.format("('%s', '%s')", stmt.setString(1,pass), stmt.setString(2,name)))) {
			
		}
	}

	@Override
	public void updateMember(Connection con) throws SQLException {
		
	}

	@Override
	public void deleteMember(Connection con) throws SQLException {
		
	}

	@Override
	public void selectMember(Connection con) throws SQLException {
		
	}
	
}
